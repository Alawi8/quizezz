import{r as d,o as L,u as z,w as _,c as s,a,b as t,d as y,n as H,e as b,t as w,f as T,g as V,h as $,v as C,i as q,j as k,k as N,l as R,m as A,T as S,p as U,F as B,q as D,s as E,x as P}from"./userAuth-CYnRtAl8.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as Q,c as F,a as I}from"./axios-NFW_rT_G.js";const O={class:"bg-green-700 text-white shadow-md sticky top-0 z-50 rounded-lg"},G={class:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between"},W={key:0,class:"relative ml-4"},Y={key:0,class:"absolute right-0 mt-2 w-64 max-w-[90vw] bg-white z-10 text-green-700 rounded-xl shadow-xl py-3 px-2 animate-fade-in"},J={key:1,class:"hidden md:flex items-center gap-3"},K={key:0,class:"md:hidden px-4 pb-4"},X={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Z={class:"bg-white p-6 rounded shadow-lg w-80"},ee={key:0,class:"text-red-500 text-sm mt-2"},te={__name:"Header",setup(g){const{user:u,login:f,logout:c,init:v}=z(),o=d(!1),l=d(!1),r=d(!1),m=d(""),x=d(""),h=d(null);L(async()=>{await v()}),_(o,n=>{n&&(r.value=!1,l.value=!1)}),_(l,n=>{n&&(r.value=!1,o.value=!1)}),_(r,n=>{n&&(l.value=!1,o.value=!1)});async function p(){h.value=null,await f(m.value,x.value),u.value?(o.value=!1,m.value="",x.value=""):h.value="Login failed"}return(n,e)=>(a(),s("header",O,[t("div",G,[e[12]||(e[12]=t("div",{class:"text-2xl font-extrabold tracking-wide"},"QuizzApp",-1)),t("button",{onClick:e[0]||(e[0]=i=>r.value=!r.value),class:"md:hidden focus:outline-none"},e[8]||(e[8]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])),t("nav",{class:H(["md:flex gap-6 items-center",r.value?"flex flex-col absolute top-full rounded-lg mt-1 left-0 w-full bg-green-700 p-4":"hidden md:flex"])},e[9]||(e[9]=[t("a",{href:"/",class:"text-white hover:text-green-100 font-medium"},"Home",-1),t("a",{href:"/projects",class:"text-white hover:text-green-100 font-medium"},"My Projects",-1),t("a",{href:"/tests",class:"text-white hover:text-green-100 font-medium"},"Quizzes",-1)]),2),b(u)?(a(),s("div",W,[t("button",{onClick:e[1]||(e[1]=i=>l.value=!l.value),class:"flex items-center gap-2 bg-white text-green-700 font-semibold px-4 py-1 rounded-full shadow-sm hover:bg-gray-100"},[t("span",null,w(b(u).name),1)]),l.value?(a(),s("div",Y,[e[10]||(e[10]=T('<a href="/profile" class="block px-4 py-2 rounded hover:bg-green-50" data-v-5825e0d3>Profile</a><a href="/my-projects" class="block px-4 py-2 rounded hover:bg-green-50" data-v-5825e0d3>My Projects</a><a href="/settings" class="block px-4 py-2 rounded hover:bg-green-50" data-v-5825e0d3>Settings</a><a href="/admin/dashboard" class="block px-4 py-2 rounded hover:bg-green-50" data-v-5825e0d3>Admin Dashboard</a><hr class="my-2" data-v-5825e0d3>',5)),t("button",{onClick:e[2]||(e[2]=(...i)=>b(c)&&b(c)(...i)),class:"w-full text-left px-4 py-2 text-red-600 rounded hover:bg-red-50"},"Logout")])):y("",!0)])):(a(),s("div",J,[t("button",{onClick:e[3]||(e[3]=i=>o.value=!0),class:"bg-white text-green-700 px-4 py-1 rounded-full font-medium hover:bg-gray-100"},"Login"),e[11]||(e[11]=t("a",{href:"/register",class:"text-white underline"},"Register",-1))]))]),!b(u)&&r.value?(a(),s("div",K,[t("button",{onClick:e[4]||(e[4]=i=>o.value=!0),class:"block w-full text-left text-white font-medium py-2"},"Login"),e[13]||(e[13]=t("a",{href:"/register",class:"block w-full text-left text-white font-medium py-2"},"Register",-1))])):y("",!0),o.value?(a(),s("div",X,[t("div",Z,[e[15]||(e[15]=t("h2",{class:"text-lg font-bold mb-4 text-green-800"},"Login",-1)),t("form",{onSubmit:V(p,["prevent"])},[$(t("input",{"onUpdate:modelValue":e[5]||(e[5]=i=>m.value=i),type:"email",placeholder:"Email",class:"border border-green-300 p-2 w-full mb-2 rounded"},null,512),[[C,m.value]]),$(t("input",{"onUpdate:modelValue":e[6]||(e[6]=i=>x.value=i),type:"password",placeholder:"Password",class:"border border-green-300 p-2 w-full mb-4 rounded"},null,512),[[C,x.value]]),e[14]||(e[14]=t("button",{class:"bg-green-700 text-white px-4 py-2 rounded w-full"},"Login",-1)),t("button",{onClick:e[7]||(e[7]=i=>o.value=!1),type:"button",class:"text-gray-500 text-sm mt-2 w-full"},"Cancel")],32),h.value?(a(),s("p",ee,w(h.value),1)):y("",!0)])])):y("",!0)]))}},se=M(te,[["__scopeId","data-v-5825e0d3"]]),ae={class:"p-6 text-center"},oe={__name:"App",setup(g){return d(0),(u,f)=>{const c=q("router-view");return a(),s("div",ae,[k(se),k(c)])}}},ne={class:"container mx-auto px-4 py-8 animate-fade-in"},le={key:0,class:"text-center text-gray-500 py-12 animate-pulse"},re={key:1},ie={key:0},de={key:0,class:"text-center text-gray-500 text-lg animate-pulse"},ue={key:1,class:"text-center text-red-500 text-lg animate-shake"},ce={key:2,class:"grid sm:grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-6"},fe={class:"text-2xl font-bold text-green-700 mb-2"},ve={class:"text-green-600 mb-4"},me=["onClick"],pe={key:1,class:"text-center text-red-500 py-12 text-lg animate-bounce"},ge={__name:"Home",setup(g){Q();const{token:u,fetchUser:f,hasAnyRole:c}=z(),v=d([]),o=d(!0),l=d(!1),r=d(null),m=N(()=>u.value&&c(["super-admin","student"]));async function x(){var p;l.value=!0;try{const n=await E.get("/api/student/display");v.value=((p=n.data)==null?void 0:p.data)??[]}catch{r.value="❌ Failed to load quizzes."}finally{l.value=!1}}function h(p){window.location.href=`/questions/${p}`}return L(async()=>{u.value&&await f(),o.value=!1}),R(()=>{m.value?x():v.value=[]}),(p,n)=>(a(),s("div",ne,[o.value?(a(),s("div",le,n[0]||(n[0]=[t("p",{class:"text-xl font-medium"},"🔄 Checking user status...",-1)]))):(a(),s("div",re,[k(S,{name:"fade",mode:"out-in"},{default:A(()=>[m.value?(a(),s("div",ie,[n[1]||(n[1]=t("h1",{class:"text-4xl font-extrabold text-center text-green-700 mb-10 animate-slide-down"}," Available Quizzes ",-1)),l.value?(a(),s("div",de," 🔄 Loading quizzes... ")):r.value?(a(),s("div",ue,w(r.value),1)):(a(),s("div",ce,[k(U,{name:"fade",tag:"div",class:"contents"},{default:A(()=>[(a(!0),s(B,null,D(v.value,e=>(a(),s("div",{key:e.id,class:"bg-white border border-green-200 rounded-2xl p-6 shadow-md hover:shadow-xl transition-all duration-300 animate-fade-in hover:-translate-y-1"},[t("h2",fe,w(e.title),1),t("p",ve," Duration: "+w(e.duration??"Not specified")+" mins ",1),t("button",{onClick:i=>h(e.id),class:"w-full bg-gradient-to-r from-green-500 to-green-700 text-white px-4 py-2 rounded-full font-semibold shadow hover:opacity-90 transition-all duration-300"}," Start Now ",8,me)]))),128))]),_:1})]))])):(a(),s("div",pe," 🚫 You are not authorized to view quizzes. "))]),_:1})]))]))}},xe=M(ge,[["__scopeId","data-v-85c7b8b8"]]),he=[{path:"/",name:"home",component:xe}],j=F({history:I(),routes:he});j.beforeEach(async(g,u,f)=>{const{token:c,user:v,init:o,hasAnyRole:l}=z();if(c.value&&!v.value&&await o(),g.meta.requiresAuth){if(!c.value)return f("/login");if(g.meta.roles&&!l(g.meta.roles))return f("/")}f()});P(oe).use(j).mount("#app");
