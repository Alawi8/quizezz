import{z as te,r as v,o as N,A as xe,p as de,c as a,f as r,a as e,i as q,l as X,b as u,j as g,B as m,d as L,F as z,x as ie,t as M,e as D,n as Z,m as S,C as P,h as E,v as Q,D as me,u as ue,s as fe,q as be}from"./userAuth-ClDDcc1o.js";import{c as ye,a as we}from"./vue-router-CUQmB_Et.js";/**
 * @license lucide-vue-next v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=C=>C.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_e=C=>C.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,h,n)=>n?n.toUpperCase():h.toLowerCase()),ke=C=>{const i=_e(C);return i.charAt(0).toUpperCase()+i.slice(1)},$e=(...C)=>C.filter((i,h,n)=>!!i&&i.trim()!==""&&n.indexOf(i)===h).join(" ").trim();/**
 * @license lucide-vue-next v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var W={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=({size:C,strokeWidth:i=2,absoluteStrokeWidth:h,color:n,iconNode:x,name:f,class:b,...d},{slots:k})=>te("svg",{...W,width:C||W.width,height:C||W.height,stroke:n||W.stroke,"stroke-width":h?Number(i)*24/Number(C):i,class:$e("lucide",...f?[`lucide-${oe(ke(f))}-icon`,`lucide-${oe(f)}`]:["lucide-icon"]),...d},[...x.map(A=>te(...A)),...k.default?[k.default()]:[]]);/**
 * @license lucide-vue-next v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=(C,i)=>(h,{slots:n})=>te(Ce,{...h,iconNode:i,name:C},n);/**
 * @license lucide-vue-next v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=V("arrow-up-to-line",[["path",{d:"M5 3h14",key:"7usisc"}],["path",{d:"m18 13-6-6-6 6",key:"1kf1n9"}],["path",{d:"M12 7v14",key:"1akyts"}]]);/**
 * @license lucide-vue-next v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=V("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-vue-next v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=V("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=V("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=V("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-vue-next v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=V("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-vue-next v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=V("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]);/**
 * @license lucide-vue-next v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=V("moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-vue-next v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=V("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=V("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-vue-next v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=V("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=V("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-vue-next v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=V("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-vue-next v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=V("trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-vue-next v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=V("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);/**
 * @license lucide-vue-next v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=V("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),De={class:"bg-green-700 text-white w-full px-4 py-3 flex items-center justify-between shadow-md"},Fe={class:"flex flex-wrap justify-center items-center gap-2"},Ve={href:"/",class:"bg-white text-green-700 px-3 py-1.5 rounded-full hover:bg-green-100"},je={class:"bg-white text-green-700 px-3 py-1.5 rounded-full hover:bg-green-100"},Qe={class:"bg-white text-green-700 px-3 py-1.5 rounded-full hover:bg-green-100"},ze={class:"bg-white text-green-700 px-3 py-1.5 rounded-full hover:bg-green-100"},He={class:"bg-white text-green-700 px-3 py-1.5 rounded-full hover:bg-green-100"},Ee={key:0,class:"absolute top-10 left-0 bg-white text-green-700 p-2 rounded-md shadow-lg space-y-1"},Re={class:"flex items-center gap-2 hover:text-green-800"},Be={class:"flex items-center gap-2 hover:text-green-800"},Ie={class:"text-lg font-bold mb-4 flex items-center gap-2"},Ne={class:"space-y-2"},Le={class:"text-lg font-bold mb-4 flex items-center gap-2"},Oe={__name:"Header",setup(C){const i=v(!1),h=v(!1),n=v(!1),x=v(null),f=v(null),b=v(null);function d(){i.value=!1,h.value=!1,n.value=!1}function k(A){const c=x.value,y=f.value,s=b.value;(i.value&&c&&!c.contains(A.target)||h.value&&y&&!y.contains(A.target)||n.value&&s&&!s.contains(A.target))&&d()}return N(()=>{document.addEventListener("click",k)}),xe(()=>{document.removeEventListener("click",k)}),(A,c)=>{const y=de("router-link");return r(),a(z,null,[e("header",De,[e("button",{onClick:c[0]||(c[0]=X(s=>h.value=!h.value,["stop"])),class:"p-2 rounded-full hover:bg-green-800"},[u(g(O),{class:"w-6 h-6"})]),e("nav",Fe,[e("a",Ve,[u(g(ne),{class:"w-5 h-5"})]),e("button",je,[u(g(le),{class:"w-5 h-5"})]),e("button",Qe,[u(g(K),{class:"w-5 h-5"})]),e("button",ze,[u(g(O),{class:"w-5 h-5"})]),e("button",He,[u(g(re),{class:"w-5 h-5"})]),e("div",{class:"relative md:hidden",ref_key:"moreRef",ref:b},[e("button",{onClick:c[1]||(c[1]=X(s=>n.value=!n.value,["stop"])),class:"bg-green-600 text-white px-3 py-1.5 rounded-full hover:bg-green-700"}," â‹¯ "),n.value?(r(),a("div",Ee,[e("button",Re,[u(g(Ae),{class:"w-4 h-4"}),c[3]||(c[3]=m(" More 1 "))]),e("button",Be,[u(g(ce),{class:"w-4 h-4"}),c[4]||(c[4]=m(" More 2 "))])])):q("",!0)],512)]),e("button",{onClick:c[2]||(c[2]=X(s=>i.value=!i.value,["stop"])),class:"p-2 rounded-full hover:bg-green-800"},[u(g(ae),{class:"w-6 h-6"})])]),i.value?(r(),a("div",{key:0,ref_key:"sidebarRef",ref:x,class:"fixed top-0 right-0 h-full w-64 bg-green-700 text-white shadow-lg z-50 p-4"},[e("h2",Ie,[u(g(ae),{class:"w-5 h-5"}),c[5]||(c[5]=m(" Menu"))]),e("ul",Ne,[e("li",null,[u(y,{to:"/admin/dashboard",class:"flex items-center gap-2 hover:text-white",onClick:d},{default:L(()=>[u(g(ne),{class:"w-4 h-4"}),c[6]||(c[6]=m(" Dashboard "))]),_:1,__:[6]})]),e("li",null,[u(y,{to:"/admin/dashboard/questions",class:"flex items-center gap-2 hover:text-white",onClick:d},{default:L(()=>[u(g(le),{class:"w-4 h-4"}),c[7]||(c[7]=m(" Questions "))]),_:1,__:[7]})]),e("li",null,[u(y,{to:"/admin/dashboard/sections",class:"flex items-center gap-2 hover:text-white",onClick:d},{default:L(()=>[u(g(K),{class:"w-4 h-4"}),c[8]||(c[8]=m(" Sections "))]),_:1,__:[8]})]),e("li",null,[u(y,{to:"/admin/dashboard/users",class:"flex items-center gap-2 hover:text-white",onClick:d},{default:L(()=>[u(g(re),{class:"w-4 h-4"}),c[9]||(c[9]=m(" Users "))]),_:1,__:[9]})]),e("li",null,[u(y,{to:"/admin/dashboard/settings",class:"flex items-center gap-2 hover:text-white",onClick:d},{default:L(()=>[u(g(O),{class:"w-4 h-4"}),c[10]||(c[10]=m(" Settings "))]),_:1,__:[10]})])]),e("button",{onClick:d,class:"mt-4 text-sm text-white hover:underline"},"Close")],512)):q("",!0),h.value?(r(),a("div",{key:1,ref_key:"settingsRef",ref:f,class:"fixed top-0 left-0 h-full w-64 bg-green-700 text-white shadow-lg z-50 p-4"},[e("h2",Le,[u(g(O),{class:"w-5 h-5"}),c[11]||(c[11]=m(" Settings"))]),c[12]||(c[12]=e("ul",{class:"space-y-2"},[e("li",null,[e("label",null,[e("input",{type:"checkbox",class:"mr-2"}),m(" Dark Mode")])]),e("li",null,[e("label",null,[e("input",{type:"checkbox",class:"mr-2"}),m(" English")])])],-1)),e("button",{onClick:d,class:"mt-4 text-sm text-white hover:underline"},"Close")],512)):q("",!0)],64)}}},Ze={class:"min-h-screen bg-gray-100 text-black"},Pe=ie({__name:"App",setup(C){return(i,h)=>{const n=de("router-view");return r(),a("div",Ze,[u(Oe),u(n)])}}}),Ke={class:"max-w-7xl mx-auto p-6 space-y-8 text-green-700"},Ge={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},Je={class:"bg-white border-2 border-green-500 rounded-2xl shadow p-6 text-center"},We={class:"text-3xl font-bold text-green-700"},Xe={class:"bg-white border-2 border-green-500 rounded-2xl shadow p-6 text-center"},Ye={class:"text-3xl font-bold text-green-700"},et={class:"bg-white border-2 border-green-500 rounded-2xl shadow p-6 text-center"},tt={class:"text-3xl font-bold text-green-700"},st={class:"bg-white border-2 border-green-500 rounded-2xl shadow p-6 text-center"},ot={class:"text-3xl font-bold text-green-700"},lt={__name:"Dashboard",setup(C){const i=v({totalUsers:0,totalSections:0,totalTests:0,totalAnswers:0});async function h(){try{const n=await D.get("/api/admin/stats");i.value={totalUsers:n.data.users,totalSections:n.data.questions,totalTests:n.data.tests,totalAnswers:n.data.answers}}catch(n){console.error("âŒ Failed to fetch stats",n)}}return N(h),(n,x)=>(r(),a("div",Ke,[x[4]||(x[4]=e("h2",{class:"text-2xl font-bold flex items-center gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v-6h13M3 7h13v6H3z"})]),m(" Dashboard Statistics ")],-1)),e("div",Ge,[e("div",Je,[x[0]||(x[0]=e("p",{class:"text-sm text-gray-500"},"Total Users",-1)),e("h3",We,M(i.value.totalUsers),1)]),e("div",Xe,[x[1]||(x[1]=e("p",{class:"text-sm text-gray-500"},"Total Questions",-1)),e("h3",Ye,M(i.value.totalSections),1)]),e("div",et,[x[2]||(x[2]=e("p",{class:"text-sm text-gray-500"},"Total Tests",-1)),e("h3",tt,M(i.value.totalTests),1)]),e("div",st,[x[3]||(x[3]=e("p",{class:"text-sm text-gray-500"},"Total Answers",-1)),e("h3",ot,M(i.value.totalAnswers),1)])])]))}},nt={class:"flex justify-between items-center"},at={class:"flex items-center gap-4"},rt=["value"],dt={class:"mt-6 space-y-4"},it={class:"font-bold text-green-800"},ut={key:1,class:"bg-white p-6 border border-green-300 rounded-lg shadow space-y-6 mt-6"},ct=["value"],pt={class:"space-y-3"},vt=["onUpdate:modelValue"],gt={class:"flex items-center gap-1 text-sm text-green-700"},ht=["checked","onChange"],xt=["onClick"],mt={class:"text-right"},ft=ie({__name:"add-new-questions",setup(C){const i=v([]),h=v([]),n=v(""),x=v(!1),f=v(""),b=v("success"),d=v({question_text:"",test_id:"",answers:[{id:Date.now()+Math.random(),answer_text:"",is_correct:!1}]}),k=()=>{d.value={question_text:"",test_id:"",answers:[{id:Date.now()+Math.random(),answer_text:"",is_correct:!1}]}},A=l=>{d.value.answers.forEach((t,o)=>{t.is_correct=o===l})},c=async()=>{try{const l=await axios.post("/api/admin/questions",d.value,{headers:{Authorization:`Bearer ${token.value}`}});i.value.unshift(l.data),f.value="âœ… Question added successfully",b.value="success",k()}catch{f.value="âŒ Failed to add question",b.value="error"}},y=()=>{x.value=!x.value,x.value||k()},s=()=>{d.value.answers.push({id:Date.now()+Math.random(),answer_text:"",is_correct:!1})},U=l=>{d.value.answers.splice(l,1)},H=async()=>{try{const l=await axios.get("/api/admin/questions",{params:n.value?{test_id:n.value}:{},headers:{Authorization:`Bearer ${token.value}`}});i.value=l.data}catch{f.value="âŒ Failed to load questions",b.value="error"}},w=async()=>{try{await axios.delete("/api/admin/questions",{headers:{Authorization:`Bearer ${token.value}`}}),i.value=[],f.value="ðŸ—‘ï¸ All questions deleted",b.value="success"}catch{f.value="âŒ Failed to delete questions",b.value="error"}};return N(async()=>{try{const l=await axios.get("/api/admin/tests",{headers:{Authorization:`Bearer ${token.value}`}});h.value=l.data,await H()}catch{f.value="âŒ Failed to load tests",b.value="error"}}),(l,t)=>(r(),a(z,null,[e("div",nt,[t[5]||(t[5]=e("h2",{class:"text-2xl font-bold text-green-700"},"ðŸ“‹ Manage Questions",-1)),e("button",{onClick:y,class:"bg-green-700 text-white px-4 py-2 rounded hover:bg-green-800 transition"},[u(g(Y),{class:"inline w-4 h-4 mr-1"}),t[4]||(t[4]=m(" Add New Question "))])]),f.value?(r(),a("div",{key:0,class:Z([b.value==="success"?"bg-green-100 border border-green-400 text-green-700":"bg-red-100 border border-red-400 text-red-700","px-4 py-3 rounded"])},M(f.value),3)):q("",!0),e("div",at,[S(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>n.value=o),onChange:t[1]||(t[1]=o=>H()),class:"border border-green-300 rounded px-3 py-2"},[t[6]||(t[6]=e("option",{value:""},"All Tests",-1)),(r(!0),a(z,null,E(h.value,o=>(r(),a("option",{key:o.id,value:o.id},M(o.title),9,rt))),128))],544),[[P,n.value]]),e("button",{onClick:w,class:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700"},[u(g(I),{class:"inline w-4 h-4 mr-1"}),t[7]||(t[7]=m(" Delete All "))])]),e("div",dt,[(r(!0),a(z,null,E(i.value,o=>(r(),a("div",{key:o.id,class:"p-4 bg-white rounded shadow"},[e("p",it,"Q: "+M(o.question_text),1)]))),128))]),x.value?(r(),a("div",ut,[t[12]||(t[12]=e("h2",{class:"text-xl font-semibold text-green-700"},"ðŸ“ New Question",-1)),S(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>d.value.question_text=o),type:"text",class:"w-full border border-green-300 px-4 py-2 rounded",placeholder:"Enter question text"},null,512),[[Q,d.value.question_text]]),S(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>d.value.test_id=o),class:"w-full border border-green-300 px-4 py-2 rounded"},[t[8]||(t[8]=e("option",{value:""},"Select Test",-1)),(r(!0),a(z,null,E(h.value,o=>(r(),a("option",{key:o.id,value:o.id},M(o.title),9,ct))),128))],512),[[P,d.value.test_id]]),e("div",pt,[(r(!0),a(z,null,E(d.value.answers,(o,$)=>(r(),a("div",{key:o.id,class:"flex items-center gap-2"},[S(e("input",{"onUpdate:modelValue":F=>o.answer_text=F,type:"text",class:"w-full border border-green-300 px-3 py-2 rounded",placeholder:"Answer option"},null,8,vt),[[Q,o.answer_text]]),e("label",gt,[e("input",{type:"radio",checked:o.is_correct,onChange:F=>A($)},null,40,ht),t[9]||(t[9]=m(" Correct "))]),e("button",{onClick:F=>U($),class:"text-red-500 hover:underline text-sm"},[u(g(I),{class:"inline w-4 h-4"})],8,xt)]))),128)),e("button",{onClick:s,class:"text-green-700 text-sm hover:underline"},[u(g(Y),{class:"inline w-4 h-4 mr-1"}),t[10]||(t[10]=m(" Add Answer "))])]),e("div",mt,[e("button",{onClick:c,class:"bg-green-700 text-white px-6 py-2 rounded hover:bg-green-800"},[u(g(K),{class:"inline w-4 h-4 mr-1"}),t[11]||(t[11]=m(" Save "))])])])):q("",!0)],64))}}),bt={class:"space-y-4"},yt={class:"flex justify-between items-start flex-wrap md:flex-nowrap"},wt={class:"space-y-1 w-full md:w-auto"},_t={class:"text-lg font-semibold"},kt={class:"text-sm"},$t={class:"font-semibold"},Ct={class:"list-disc pl-6 text-sm"},Mt={class:"flex gap-2 flex-wrap mt-4 md:mt-0"},At=["onClick"],Ut=["onClick"],St={key:0,class:"bg-green-50 border border-green-400 rounded-lg p-6 space-y-4"},Tt=["value"],qt={class:"space-y-2"},Dt=["onUpdate:modelValue"],Ft={class:"flex items-center gap-1 text-sm"},Vt=["checked","onChange"],jt=["onClick"],Qt={class:"text-right"},zt={class:"bg-white rounded-lg p-6 shadow-lg w-full max-w-md space-y-4"},Ht={class:"flex justify-end gap-3"},Et={__name:"Questions",setup(C){const i=v(null),h=v(null);let n=null;const x=v([]),f=v([]),b=v(""),d=v(!1),k=v(null),A=v(null),c=v(null),y=v("success"),s=v({question_text:"",test_id:"",answers:[{id:Date.now(),answer_text:"",is_correct:!1},{id:Date.now()+1,answer_text:"",is_correct:!1}]});let U=v(1),H=v(!1),w=v(!0);const l=async()=>{const _=await D.get("/api/admin/section");f.value=_.data},t=async()=>{if(!(H.value||!w.value)){H.value=!0;try{const _=await D.get("/api/admin/questions",{params:{page:U.value,test_id:b.value||void 0}});_.data.data.length===0?w.value=!1:(x.value.push(..._.data.data),U.value++)}catch(_){console.error(_)}finally{H.value=!1}}},o=()=>{n&&n.disconnect(),n=new IntersectionObserver(_=>{_[0].isIntersecting&&t()},{root:i.value,threshold:1}),h.value&&n.observe(h.value)};N(()=>{l(),t(),o()}),me(()=>{n&&h.value&&n.unobserve(h.value)});const $=async()=>{try{const _=await D.put(`/api/admin/questions/${k.value}`,s.value),p=x.value.findIndex(j=>j.id===k.value);p!==-1&&(x.value[p]=_.data),G("âœ… Question updated"),ge()}catch{G("âŒ Failed to update question","error")}},F=async()=>{try{await D.delete(`/api/admin/questions/${A.value.id}`),x.value=x.value.filter(_=>_.id!==A.value.id),G("âœ… Question deleted"),A.value=null}catch{G("âŒ Failed to delete question","error")}},R=_=>{s.value={question_text:_.question_text,test_id:_.test_id,answers:_.answers.map(p=>({id:Date.now()+Math.random(),answer_text:p.answer_text,is_correct:p.is_correct}))},k.value=_.id,d.value=!1},B=_=>{s.value.answers.forEach((p,j)=>p.is_correct=j===_)},ve=_=>{A.value=_},G=(_,p="success")=>{c.value=_,y.value=p,setTimeout(()=>c.value=null,4e3)},ge=()=>{s.value={question_text:"",test_id:"",answers:[{id:Date.now(),answer_text:"",is_correct:!1},{id:Date.now()+1,answer_text:"",is_correct:!1}]},k.value=null,d.value=!1},he=_=>{const p=f.value.find(j=>j.id===_);return p?p.title:"Unknown"};return(_,p)=>(r(),a("div",{class:"max-w-6xl mx-auto p-6 space-y-8 relative",ref_key:"scrollContainer",ref:i},[u(ft),e("div",bt,[(r(!0),a(z,null,E(x.value,j=>(r(),a("div",{key:j.id,class:"bg-white border border-green-300 rounded-lg shadow-sm p-5 space-y-4"},[e("div",yt,[e("div",wt,[e("h3",_t,M(j.question_text),1),e("p",kt,[p[5]||(p[5]=m("Test: ")),e("span",$t,M(he(j.test_id)),1)]),e("ul",Ct,[(r(!0),a(z,null,E(j.answers,(T,J)=>(r(),a("li",{key:J,class:Z({"text-green-600 font-bold":T.is_correct})},M(T.answer_text),3))),128))])]),e("div",Mt,[e("button",{onClick:T=>R(j),class:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 flex items-center gap-1"},[u(g(se),{class:"w-4 h-4"}),p[6]||(p[6]=m(" Edit "))],8,At),e("button",{onClick:T=>ve(j),class:"bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 flex items-center gap-1"},[u(g(I),{class:"w-4 h-4"}),p[7]||(p[7]=m(" Delete "))],8,Ut)])]),k.value===j.id?(r(),a("div",St,[p[12]||(p[12]=e("h3",{class:"text-lg font-semibold text-green-700"},"âœï¸ Edit Question",-1)),S(e("input",{"onUpdate:modelValue":p[0]||(p[0]=T=>s.value.question_text=T),type:"text",placeholder:"Question text",class:"w-full border border-green-300 rounded px-4 py-2"},null,512),[[Q,s.value.question_text]]),S(e("select",{"onUpdate:modelValue":p[1]||(p[1]=T=>s.value.test_id=T),class:"w-full border border-green-300 rounded px-4 py-2"},[p[8]||(p[8]=e("option",{value:""},"Select Test",-1)),(r(!0),a(z,null,E(f.value,T=>(r(),a("option",{key:T.id,value:T.id},M(T.title),9,Tt))),128))],512),[[P,s.value.test_id]]),e("div",qt,[(r(!0),a(z,null,E(s.value.answers,(T,J)=>(r(),a("div",{key:T.id,class:"flex items-center gap-2"},[S(e("input",{"onUpdate:modelValue":ee=>T.answer_text=ee,type:"text",class:"w-full border border-green-300 rounded px-3 py-2",placeholder:"Answer option"},null,8,Dt),[[Q,T.answer_text]]),e("label",Ft,[e("input",{type:"radio",checked:T.is_correct,onChange:ee=>B(J)},null,40,Vt),p[9]||(p[9]=m(" Correct "))]),e("button",{onClick:ee=>_.removeAnswer(J),class:"text-red-600 hover:underline text-sm"},[u(g(I),{class:"inline w-4 h-4"})],8,jt)]))),128)),e("button",{onClick:p[2]||(p[2]=(...T)=>_.addAnswer&&_.addAnswer(...T)),class:"text-green-700 text-sm hover:underline"},[u(g(Y),{class:"inline w-4 h-4 mr-1"}),p[10]||(p[10]=m(" Add Answer "))])]),e("div",Qt,[e("button",{onClick:$,class:"bg-green-700 text-white px-6 py-2 rounded hover:bg-green-800"},[u(g(K),{class:"inline w-4 h-4 mr-1"}),p[11]||(p[11]=m(" Save "))])])])):q("",!0)]))),128))]),g(w)?(r(),a("div",{key:0,ref_key:"loadMoreRef",ref:h,class:"text-center text-gray-500 py-4"}," â³ Loading more questions... ",512)):q("",!0),A.value?(r(),a("div",{key:1,class:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",onClick:p[4]||(p[4]=X(j=>A.value=null,["self"]))},[e("div",zt,[p[14]||(p[14]=e("h2",{class:"text-lg font-bold text-red-600"},"Delete Question?",-1)),p[15]||(p[15]=e("p",{class:"text-green-800 text-sm"},"Are you sure you want to delete this question?",-1)),e("div",Ht,[e("button",{onClick:p[3]||(p[3]=j=>A.value=null),class:"bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300"},"Cancel"),e("button",{onClick:F,class:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700"},[u(g(I),{class:"inline w-4 h-4 mr-1"}),p[13]||(p[13]=m(" Confirm Delete "))])])])])):q("",!0)],512))}},Rt={class:"max-w-6xl mx-auto p-6 space-y-8"},Bt={class:"flex justify-between items-center"},It={key:0,class:"bg-white border border-green-300 rounded-lg p-6 space-y-4"},Nt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Lt={class:"text-right"},Ot={class:"space-y-4"},Zt={class:"flex flex-col md:flex-row justify-between md:items-center w-full"},Pt={class:"flex-1 space-y-1"},Kt={class:"text-lg font-semibold"},Gt={class:"text-sm"},Jt={class:"text-xs text-gray-500"},Wt={class:"flex gap-2 flex-wrap items-center mt-2 md:mt-0"},Xt=["onClick"],Yt=["onClick"],es={key:0,class:"border border-green-300 bg-white p-4 rounded-lg space-y-4"},ts={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ss={class:"text-right"},os={key:2,class:"fixed inset-0 z-50 bg-black/40 flex items-center justify-center",style:{"backdrop-filter":"blur(2px)"}},ls={class:"bg-white rounded-lg p-6 shadow-lg w-full max-w-md space-y-4"},ns={class:"flex justify-end gap-3"},as={__name:"Sections",setup(C){const i=v([]),h=v(!1),n=v(null),x=v("success"),f=v(null),b=v(null),d=v({title:"",description:"",duration:30});function k(){h.value=!h.value,h.value||A()}function A(){d.value={title:"",description:"",duration:30},b.value=null}async function c(){try{const t=await D.get("/api/admin/section");i.value=t.data}catch{l("âŒ Failed to load sections","error")}}async function y(){try{const t=await D.post("/api/admin/section",d.value);i.value.push(t.data),l("âœ… Section added successfully","success"),A(),h.value=!1}catch{l("âŒ Failed to add section","error")}}function s(t){b.value={...t},d.value={...t},h.value=!1}async function U(){try{const t=await D.put(`/api/admin/section/${b.value.id}`,d.value),o=i.value.findIndex($=>$.id===b.value.id);o!==-1&&(i.value[o]=t.data),l("âœ… Section updated successfully","success"),A()}catch{l("âŒ Failed to update section","error")}}function H(t){f.value=t}async function w(){try{await D.delete(`/api/admin/section/${f.value.id}`),i.value=i.value.filter(t=>t.id!==f.value.id),l("âœ… Section deleted","error"),f.value=null}catch{l("âŒ Failed to delete section","error")}}function l(t,o="success"){n.value=t,x.value=o,setTimeout(()=>n.value=null,4e3)}return N(c),(t,o)=>(r(),a("div",Rt,[e("div",Bt,[o[7]||(o[7]=e("h2",{class:"text-2xl font-bold text-green-700"},"ðŸ—‚ï¸ Manage Sections",-1)),e("button",{onClick:k,class:"bg-green-700 text-white px-4 py-2 rounded hover:bg-green-800 transition"},[u(g(Y),{class:"inline w-4 h-4 mr-1"}),m(" "+M(b.value?"Update Section":"Add New Section"),1)])]),h.value&&!b.value?(r(),a("div",It,[e("div",Nt,[S(e("input",{"onUpdate:modelValue":o[0]||(o[0]=$=>d.value.title=$),type:"text",placeholder:"Section Title",class:"w-full border border-green-300 rounded px-4 py-2"},null,512),[[Q,d.value.title]]),S(e("input",{"onUpdate:modelValue":o[1]||(o[1]=$=>d.value.duration=$),type:"number",placeholder:"Duration (minutes)",class:"w-full border border-green-300 rounded px-4 py-2"},null,512),[[Q,d.value.duration,void 0,{number:!0}]]),S(e("input",{"onUpdate:modelValue":o[2]||(o[2]=$=>d.value.description=$),type:"text",placeholder:"Short Description",class:"w-full border border-green-300 rounded px-4 py-2"},null,512),[[Q,d.value.description]])]),e("div",Lt,[e("button",{onClick:y,class:"bg-green-700 text-white font-semibold px-6 py-2 rounded hover:bg-green-800 transition"},[u(g(K),{class:"inline w-4 h-4 mr-1"}),o[8]||(o[8]=m(" Save Section "))])])])):q("",!0),n.value?(r(),a("div",{key:1,class:Z([x.value==="success"?"bg-green-100 border border-green-400 text-green-700":"bg-red-100 border border-red-400 text-red-700","px-4 py-3 rounded"])},M(n.value),3)):q("",!0),e("div",Ot,[(r(!0),a(z,null,E(i.value,$=>{var F,R;return r(),a("div",{key:$.id,class:Z([((F=b.value)==null?void 0:F.id)===$.id?"bg-green-50 border-green-500":"bg-white border-green-300","border rounded-lg shadow-sm p-5 flex flex-col gap-4"])},[e("div",Zt,[e("div",Pt,[e("h3",Kt,M($.title),1),e("p",Gt,M($.description),1),e("p",Jt,"Duration: "+M($.duration)+" mins",1)]),e("div",Wt,[e("button",{onClick:B=>s($),class:"bg-green-600 text-white px-4 py-1 rounded hover:bg-green-700 flex items-center gap-1"},[u(g(se),{class:"w-4 h-4"}),o[9]||(o[9]=m(" Edit "))],8,Xt),e("button",{onClick:B=>H($),class:"bg-red-600 text-white px-4 py-1 rounded hover:bg-red-700 flex items-center gap-1"},[u(g(I),{class:"w-4 h-4"}),o[10]||(o[10]=m(" Delete "))],8,Yt)])]),((R=b.value)==null?void 0:R.id)===$.id?(r(),a("div",es,[e("div",ts,[S(e("input",{"onUpdate:modelValue":o[3]||(o[3]=B=>d.value.title=B),type:"text",placeholder:"Section Title",class:"w-full border border-green-300 rounded px-4 py-2"},null,512),[[Q,d.value.title]]),S(e("input",{"onUpdate:modelValue":o[4]||(o[4]=B=>d.value.duration=B),type:"number",placeholder:"Duration (minutes)",class:"w-full border border-green-300 rounded px-4 py-2"},null,512),[[Q,d.value.duration,void 0,{number:!0}]]),S(e("input",{"onUpdate:modelValue":o[5]||(o[5]=B=>d.value.description=B),type:"text",placeholder:"Short Description",class:"w-full border border-green-300 rounded px-4 py-2"},null,512),[[Q,d.value.description]])]),e("div",ss,[e("button",{onClick:U,class:"bg-green-700 hover:bg-green-800 text-white px-6 py-2 rounded flex items-center gap-1"},[u(g(se),{class:"w-4 h-4"}),o[11]||(o[11]=m(" Update Section "))])])])):q("",!0)],2)}),128))]),f.value?(r(),a("div",os,[e("div",ls,[o[13]||(o[13]=e("h2",{class:"text-lg font-bold text-red-600"},"Delete Section?",-1)),o[14]||(o[14]=e("p",{class:"text-gray-700"},"This action cannot be undone. Are you sure you want to delete this section?",-1)),e("div",ns,[e("button",{onClick:o[6]||(o[6]=$=>f.value=null),class:"bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300"}," Cancel "),e("button",{onClick:w,class:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 flex items-center gap-1"},[u(g(I),{class:"inline w-4 h-4 mr-1"}),o[12]||(o[12]=m(" Confirm Delete "))])])])])):q("",!0)]))}},rs={class:"max-w-6xl mx-auto p-6 space-y-8 text-green-700"},ds={class:"flex justify-between items-center"},is={key:0,class:"bg-white border rounded-lg shadow-sm p-6 space-y-4"},us={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded space-y-1"},cs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ps=["value"],vs={class:"space-y-6"},gs={class:"flex flex-col md:flex-row justify-between md:items-center space-y-2 md:space-y-0"},hs={class:"flex-1 space-y-1"},xs={class:"text-lg font-semibold text-gray-800"},ms={class:"text-sm text-gray-600"},fs={class:"text-xs text-gray-500"},bs={class:"inline-block px-2 py-0.5 bg-indigo-100 text-indigo-700 rounded"},ys={key:0,class:"flex gap-2 flex-wrap items-center"},ws=["onUpdate:modelValue","onChange"],_s=["value"],ks=["onClick"],$s={key:1,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},Cs={class:"bg-white rounded-lg p-6 w-full max-w-md space-y-4"},Ms={class:"flex justify-end gap-3"},As={__name:"Users",setup(C){const{user:i}=ue(),h=["admin","super-admin"].some(w=>{var l,t;return(t=(l=i.value)==null?void 0:l.roles)==null?void 0:t.includes(w)}),n=v([]),x=v([]),f=v(!1),b=v(null),d=v([]),k=v({name:"",email:"",password:"",role:""});async function A(){try{const w=await D.get("api/admin/users");n.value=w.data.data||[]}catch(w){console.error("Failed to fetch users",w)}}async function c(){try{const w=await D.get("api/admin/roles");x.value=w.data.roles||[]}catch(w){console.error("Failed to fetch roles",w)}}async function y(){var $;d.value=[];const{name:w,email:l,password:t,role:o}=k.value;if(!w||!l||!t||!o){d.value.push("All fields are required.");return}try{const F=await D.post("api/admin/users",{name:w,email:l,password:t,role:o});n.value.push(F.data.user),k.value={name:"",email:"",password:"",role:""},f.value=!1}catch(F){(($=F.response)==null?void 0:$.status)===422?d.value=Object.values(F.response.data.errors).flat():d.value=["Failed to add user."]}}async function s(w){try{const l=await D.post(`api/admin/users/${w.id}/update-role`,{role:w.role});w.roles=l.data.user.roles}catch(l){console.error("Failed to update role",l)}}function U(w){b.value=w}async function H(){try{await D.delete(`api/admin/users/${b.value.id}`),n.value=n.value.filter(w=>w.id!==b.value.id),b.value=null}catch(w){console.error("Failed to delete user",w)}}return N(async()=>{await c(),await A()}),(w,l)=>(r(),a("div",rs,[e("div",ds,[l[6]||(l[6]=e("h2",{class:"text-2xl font-bold"},"ðŸ‘¥ Users Management",-1)),g(h)?(r(),a("button",{key:0,onClick:l[0]||(l[0]=t=>f.value=!f.value),class:"bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700 transition"},M(f.value?"âŒ Hide Form":"âž• Add User"),1)):q("",!0)]),f.value?(r(),a("div",is,[l[8]||(l[8]=e("h2",{class:"text-xl font-bold text-gray-800"},"Add New User",-1)),d.value.length?(r(),a("div",us,[(r(!0),a(z,null,E(d.value,(t,o)=>(r(),a("div",{key:o,class:"text-sm"},M(t),1))),128))])):q("",!0),e("div",cs,[S(e("input",{"onUpdate:modelValue":l[1]||(l[1]=t=>k.value.name=t),type:"text",class:"w-full border px-4 py-2 rounded",placeholder:"Name"},null,512),[[Q,k.value.name]]),S(e("input",{"onUpdate:modelValue":l[2]||(l[2]=t=>k.value.email=t),type:"email",class:"w-full border px-4 py-2 rounded",placeholder:"Email"},null,512),[[Q,k.value.email]]),S(e("input",{"onUpdate:modelValue":l[3]||(l[3]=t=>k.value.password=t),type:"password",class:"w-full border px-4 py-2 rounded",placeholder:"Password"},null,512),[[Q,k.value.password]]),S(e("select",{"onUpdate:modelValue":l[4]||(l[4]=t=>k.value.role=t),class:"w-full border px-4 py-2 rounded"},[l[7]||(l[7]=e("option",{value:""},"Select Role",-1)),(r(!0),a(z,null,E(x.value,t=>(r(),a("option",{key:t,value:t},M(t),9,ps))),128))],512),[[P,k.value.role]])]),e("div",{class:"text-right"},[e("button",{onClick:y,class:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition"}," Save User ")])])):q("",!0),e("div",vs,[(r(!0),a(z,null,E(n.value,(t,o)=>{var $,F;return r(),a("div",{key:o,class:"bg-white border rounded-lg shadow-sm p-5 space-y-4"},[e("div",gs,[e("div",hs,[e("h3",xs,M(t.name),1),e("p",ms,M(t.email),1),e("p",fs,[l[9]||(l[9]=m(" Role: ")),e("span",bs,M(((F=($=t.roles)==null?void 0:$[0])==null?void 0:F.name)||"None"),1)])]),g(h)?(r(),a("div",ys,[S(e("select",{"onUpdate:modelValue":R=>t.role=R,onChange:R=>s(t),class:"border px-3 py-1 rounded"},[l[10]||(l[10]=e("option",{value:""},"Change Role",-1)),(r(!0),a(z,null,E(x.value,R=>(r(),a("option",{key:R,value:R},M(R),9,_s))),128))],40,ws),[[P,t.role]]),e("button",{onClick:R=>U(t),class:"bg-red-600 text-white px-4 py-1 rounded hover:bg-red-700 transition"}," Delete ",8,ks)])):q("",!0)])])}),128))]),b.value?(r(),a("div",$s,[e("div",Cs,[l[11]||(l[11]=e("h2",{class:"text-lg font-bold text-red-600"},"Delete User?",-1)),l[12]||(l[12]=e("p",{class:"text-gray-700"},"This action is permanent.",-1)),e("div",Ms,[e("button",{onClick:l[5]||(l[5]=t=>b.value=null),class:"bg-gray-200 px-4 py-2 rounded"},"Cancel"),e("button",{onClick:H,class:"bg-red-600 text-white px-4 py-2 rounded"},"Confirm Delete")])])])):q("",!0)]))}},Us={class:"max-w-6xl mx-auto p-6 space-y-8 text-green-700"},Ss={class:"text-2xl font-bold flex items-center gap-2"},Ts={class:"bg-white border rounded-lg shadow p-6 space-y-6"},qs={class:"text-lg font-semibold flex items-center gap-2"},Ds={class:"text-right"},Fs={class:"bg-white border rounded-lg shadow p-6 space-y-4"},Vs={class:"text-lg font-semibold flex items-center gap-2"},js={class:"flex items-center justify-between"},Qs={class:"inline-flex items-center cursor-pointer"},zs={class:"bg-white border rounded-lg shadow p-6 space-y-6"},Hs={class:"text-lg font-semibold flex items-center gap-2"},Es={class:"text-right"},Rs={class:"bg-white border border-red-500 rounded-lg shadow p-6 space-y-4"},Bs={class:"text-lg font-semibold text-red-600 flex items-center gap-2"},Is={class:"text-right"},Ns={__name:"Settings",setup(C){const i=v(""),h=v("success"),n=v({system_name:"",system_description:"",dark_mode_enabled:!1}),x=v(null);async function f(){const y=localStorage.getItem("auth_token");y&&(D.defaults.headers.common.Authorization=`Bearer ${y}`)}async function b(){var y;try{await D.post("api/settings",n.value),c("âœ… Settings saved successfully","success")}catch(s){c("âŒ Error saving settings","error"),console.error(((y=s.response)==null?void 0:y.data)||s.message)}}function d(y){x.value=y.target.files[0]}async function k(y){var U;if(!x.value)return c("Choose a file first","error");const s=new FormData;s.append("file",x.value);try{await D.post(`api/import/${y}`,s,{headers:{"Content-Type":"multipart/form-data"}}),c("âœ… File uploaded successfully","success"),x.value=null}catch(H){c("âŒ Upload failed","error"),console.error(((U=H.response)==null?void 0:U.data)||H.message)}}async function A(y){var s;if(confirm("Are you sure? This cannot be undone."))try{await D.delete(`api/delete/${y}`),c(`âœ… All ${y} deleted successfully`,"success")}catch(U){c("âŒ Delete failed","error"),console.error(((s=U.response)==null?void 0:s.data)||U.message)}}function c(y,s="success"){i.value=y,h.value=s,setTimeout(()=>i.value=null,4e3)}return N(f),(y,s)=>(r(),a("div",Us,[e("h2",Ss,[u(g(O),{class:"w-6 h-6"}),s[5]||(s[5]=m(" System Settings "))]),i.value?(r(),a("div",{key:0,class:Z([h.value==="success"?"bg-green-100 border-green-400 text-green-700":"bg-red-100 border-red-400 text-red-700","border px-4 py-3 rounded transition"])},M(i.value),3)):q("",!0),e("div",Ts,[e("h3",qs,[u(g(ce),{class:"w-5 h-5"}),s[6]||(s[6]=m(" System Info "))]),e("div",null,[s[7]||(s[7]=e("label",{class:"block text-sm font-medium mb-1"},"System Name",-1)),S(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=U=>n.value.system_name=U),placeholder:"Enter system name",class:"w-full border px-3 py-2 rounded"},null,512),[[Q,n.value.system_name]])]),e("div",null,[s[8]||(s[8]=e("label",{class:"block text-sm font-medium mb-1"},"System Description",-1)),S(e("textarea",{rows:"3","onUpdate:modelValue":s[1]||(s[1]=U=>n.value.system_description=U),placeholder:"Enter system description",class:"w-full border px-3 py-2 rounded"},null,512),[[Q,n.value.system_description]])]),e("div",Ds,[e("button",{onClick:b,class:"bg-green-700 text-white px-5 py-2 rounded hover:bg-green-800 transition flex items-center gap-2"},[u(g(Se),{class:"w-4 h-4"}),s[9]||(s[9]=m(" Save Settings "))])])]),e("div",Fs,[e("h3",Vs,[u(g(Ue),{class:"w-5 h-5"}),s[10]||(s[10]=m(" Dark Mode "))]),e("div",js,[s[12]||(s[12]=e("span",null," Enable or disable dark mode for all users ",-1)),e("label",Qs,[S(e("input",{type:"checkbox",class:"sr-only peer","onUpdate:modelValue":s[2]||(s[2]=U=>n.value.dark_mode_enabled=U)},null,512),[[fe,n.value.dark_mode_enabled]]),s[11]||(s[11]=e("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer-checked:bg-green-600 relative"},[e("span",{class:"absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition peer-checked:translate-x-5"})],-1))])])]),e("div",zs,[e("h3",Hs,[u(g(qe),{class:"w-5 h-5"}),s[13]||(s[13]=m(" Import Questions "))]),e("div",null,[e("input",{type:"file",onChange:d,accept:".csv,.xlsx",class:"w-full border px-3 py-2 rounded"},null,32)]),e("div",Es,[e("button",{onClick:s[3]||(s[3]=U=>k("questions")),class:"bg-green-700 text-white px-5 py-2 rounded hover:bg-green-800 transition flex items-center gap-2"},[u(g(Me),{class:"w-4 h-4"}),s[14]||(s[14]=m(" Upload & Import "))])])]),e("div",Rs,[e("h3",Bs,[u(g(Te),{class:"w-5 h-5"}),s[15]||(s[15]=m(" Delete All Questions "))]),s[17]||(s[17]=e("p",{class:"text-sm"}," This will permanently delete all questions. This action cannot be undone. ",-1)),e("div",Is,[e("button",{onClick:s[4]||(s[4]=U=>A("questions")),class:"bg-red-600 text-white px-5 py-2 rounded hover:bg-red-700 transition flex items-center gap-2"},[u(g(I),{class:"w-4 h-4"}),s[16]||(s[16]=m(" Delete All "))])])])]))}},Ls=[{path:"/admin/dashboard",name:"DashboardHome",component:lt,meta:{requiresAuth:!0}},{path:"/admin/dashboard/questions",name:"Questions",component:Et,meta:{requiresAuth:!0,roles:["super-admin","student"]}},{path:"/admin/dashboard/sections",name:"Sections",component:as,meta:{requiresAuth:!0,roles:["super-admin","student"]}},{path:"/admin/dashboard/users",name:"Users",component:As,meta:{requiresAuth:!0,roles:["super-admin","student"]}},{path:"/admin/dashboard/settings",name:"Settings",component:Ns,meta:{requiresAuth:!0,roles:["super-admin","student"]}}],pe=ye({history:we(),routes:Ls});pe.beforeEach(async(C,i,h)=>{const{token:n,user:x,init:f,hasAnyRole:b}=ue();if(n.value&&!x.value&&await f(),C.meta.requiresAuth){if(!n.value)return h("/login");if(C.meta.roles&&!b(C.meta.roles))return h("/")}h()});be(Pe).use(pe).mount("#app");
