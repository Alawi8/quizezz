import{r as v,o as L,u as $,w as _,c as s,a as o,b as e,d as k,n as N,e as b,t as f,f as S,g as q,h as z,v as C,i as M,j as V,k as w,l as H,m as R,p as A,T,q as B,s as E,F as Q,x as U,y as D}from"./userAuth-CKIwDY4H.js";import{_ as P,u as F,c as I,a as O}from"./axios-On_PV_-i.js";const W={class:"bg-green-700 text-white shadow-md sticky top-0 z-50 rounded-lg"},G={class:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between"},Y={key:0,class:"relative ml-4"},J={key:0,class:"absolute right-0 mt-2 w-64 max-w-[90vw] bg-white z-10 text-green-700 rounded-xl shadow-xl py-3 px-2 animate-fade-in"},K={key:1,class:"hidden md:flex items-center gap-3"},X={key:0,class:"md:hidden px-4 pb-4"},Z={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ee={class:"bg-white p-6 rounded shadow-lg w-80"},te={key:0,class:"text-red-500 text-sm mt-2"},se={__name:"Header",setup(x){const{user:u,login:n,logout:d,init:l}=$(),a=v(!1),r=v(!1),c=v(!1),y=v(""),m=v(""),i=v(null);L(async()=>{await l()}),_(a,h=>{h&&(c.value=!1,r.value=!1)}),_(r,h=>{h&&(c.value=!1,a.value=!1)}),_(c,h=>{h&&(r.value=!1,a.value=!1)});async function g(){i.value=null,await n(y.value,m.value),u.value?(a.value=!1,y.value="",m.value=""):i.value="Login failed"}return(h,t)=>(o(),s("header",W,[e("div",G,[t[12]||(t[12]=e("div",{class:"text-2xl font-extrabold tracking-wide"},"QuizzApp",-1)),e("button",{onClick:t[0]||(t[0]=p=>c.value=!c.value),class:"md:hidden focus:outline-none"},t[8]||(t[8]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])),e("nav",{class:N(["md:flex gap-6 items-center",c.value?"flex flex-col absolute top-full rounded-lg mt-1 left-0 w-full bg-green-700 p-4":"hidden md:flex"])},t[9]||(t[9]=[e("a",{href:"/",class:"text-white hover:text-green-100 font-medium"},"Home",-1),e("a",{href:"/projects",class:"text-white hover:text-green-100 font-medium"},"My Projects",-1),e("a",{href:"/tests",class:"text-white hover:text-green-100 font-medium"},"Quizzes",-1)]),2),b(u)?(o(),s("div",Y,[e("button",{onClick:t[1]||(t[1]=p=>r.value=!r.value),class:"flex items-center gap-2 bg-white text-green-700 font-semibold px-4 py-1 rounded-full shadow-sm hover:bg-gray-100"},[e("span",null,f(b(u).name),1)]),r.value?(o(),s("div",J,[t[10]||(t[10]=S('<a href="/profile" class="block px-4 py-2 rounded hover:bg-green-50" data-v-5825e0d3>Profile</a><a href="/my-projects" class="block px-4 py-2 rounded hover:bg-green-50" data-v-5825e0d3>My Projects</a><a href="/settings" class="block px-4 py-2 rounded hover:bg-green-50" data-v-5825e0d3>Settings</a><a href="/admin/dashboard" class="block px-4 py-2 rounded hover:bg-green-50" data-v-5825e0d3>Admin Dashboard</a><hr class="my-2" data-v-5825e0d3>',5)),e("button",{onClick:t[2]||(t[2]=(...p)=>b(d)&&b(d)(...p)),class:"w-full text-left px-4 py-2 text-red-600 rounded hover:bg-red-50"},"Logout")])):k("",!0)])):(o(),s("div",K,[e("button",{onClick:t[3]||(t[3]=p=>a.value=!0),class:"bg-white text-green-700 px-4 py-1 rounded-full font-medium hover:bg-gray-100"},"Login"),t[11]||(t[11]=e("a",{href:"/register",class:"text-white underline"},"Register",-1))]))]),!b(u)&&c.value?(o(),s("div",X,[e("button",{onClick:t[4]||(t[4]=p=>a.value=!0),class:"block w-full text-left text-white font-medium py-2"},"Login"),t[13]||(t[13]=e("a",{href:"/register",class:"block w-full text-left text-white font-medium py-2"},"Register",-1))])):k("",!0),a.value?(o(),s("div",Z,[e("div",ee,[t[15]||(t[15]=e("h2",{class:"text-lg font-bold mb-4 text-green-800"},"Login",-1)),e("form",{onSubmit:q(g,["prevent"])},[z(e("input",{"onUpdate:modelValue":t[5]||(t[5]=p=>y.value=p),type:"email",placeholder:"Email",class:"border border-green-300 p-2 w-full mb-2 rounded"},null,512),[[C,y.value]]),z(e("input",{"onUpdate:modelValue":t[6]||(t[6]=p=>m.value=p),type:"password",placeholder:"Password",class:"border border-green-300 p-2 w-full mb-4 rounded"},null,512),[[C,m.value]]),t[14]||(t[14]=e("button",{class:"bg-green-700 text-white px-4 py-2 rounded w-full"},"Login",-1)),e("button",{onClick:t[7]||(t[7]=p=>a.value=!1),type:"button",class:"text-gray-500 text-sm mt-2 w-full"},"Cancel")],32),i.value?(o(),s("p",te,f(i.value),1)):k("",!0)])])):k("",!0)]))}},oe=P(se,[["__scopeId","data-v-5825e0d3"]]),ae={class:"space-y-2 p-4"},ne={__name:"Test",setup(x){class u{constructor(l,a){this.name=l,this.nationality=a,this.age=30,this.energy=100}birthday(){this.age++}work(){this.energy>0&&(this.energy-=10)}}const n=M(new u("Ayoub","Saudi"));return(d,l)=>(o(),s("div",ae,[l[2]||(l[2]=e("h2",{class:"text-xl font-bold"},"ðŸ‘¨ Info",-1)),e("p",null,"Name: "+f(n.name),1),e("p",null,"Nationality: "+f(n.nationality),1),e("p",null,"Age: "+f(n.age),1),e("p",null,"Energy: "+f(n.energy),1),e("button",{onClick:l[0]||(l[0]=a=>n.birthday()),class:"bg-blue-500 text-white px-3 py-1 rounded"}," ðŸŽ‚ Birthday "),e("button",{onClick:l[1]||(l[1]=a=>n.work()),class:"bg-red-500 text-white px-3 py-1 rounded"}," ðŸ’¼ Work ")]))}},le={class:"p-6 text-center"},re={__name:"App",setup(x){return v(0),(u,n)=>{const d=V("router-view");return o(),s("div",le,[w(oe),w(d),w(ne)])}}},ie={class:"container mx-auto px-4 py-8 animate-fade-in"},de={key:0,class:"text-center text-gray-500 py-12 animate-pulse"},ue={key:1},ce={key:0},pe={key:0,class:"text-center text-gray-500 text-lg animate-pulse"},fe={key:1,class:"text-center text-red-500 text-lg animate-shake"},me={key:2,class:"grid sm:grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-6"},ge={class:"text-2xl font-bold text-green-700 mb-2"},ve={class:"text-green-600 mb-4"},xe=["onClick"],he={key:1,class:"text-center text-red-500 py-12 text-lg animate-bounce"},ye={__name:"Home",setup(x){class u{constructor(){this.tests=[],this.loading=!1,this.error=null}async fetch(){var i;this.loading=!0;try{const g=await B.get("/api/student/display");this.tests=((i=g.data)==null?void 0:i.data)??[]}catch{this.error="âŒ Failed to load quizzes."}finally{this.loading=!1}}get all(){return this.tests}}F();const{token:n,fetchUser:d,hasAnyRole:l}=$(),a=v(!0),r=M(new u),c=H(()=>n.value&&l(["super-admin","student"]));function y(m){window.location.href=`/questions/${m}`}return L(async()=>{n.value&&await d(),a.value=!1}),R(()=>{c.value&&r.fetch()}),(m,i)=>(o(),s("div",ie,[a.value?(o(),s("div",de,i[0]||(i[0]=[e("p",{class:"text-xl font-medium"},"ðŸ”„ Checking user status...",-1)]))):(o(),s("div",ue,[w(T,{name:"fade",mode:"out-in"},{default:A(()=>[c.value?(o(),s("div",ce,[i[1]||(i[1]=e("h1",{class:"text-4xl font-extrabold text-center text-green-700 mb-10 animate-slide-down"}," Available Quizzes ",-1)),r.loading?(o(),s("div",pe," ðŸ”„ Loading quizzes... ")):r.error?(o(),s("div",fe,f(r.error),1)):(o(),s("div",me,[w(E,{name:"fade",tag:"div",class:"contents"},{default:A(()=>[(o(!0),s(Q,null,U(r.all,g=>(o(),s("div",{key:g.id,class:"bg-white border border-green-200 rounded-2xl p-6 shadow-md hover:shadow-xl transition-all duration-300 animate-fade-in hover:-translate-y-1"},[e("h2",ge,f(g.title),1),e("p",ve,"Duration: "+f(g.duration??"Not specified")+" mins",1),e("button",{onClick:h=>y(g.id),class:"w-full bg-gradient-to-r from-green-500 to-green-700 text-white px-4 py-2 rounded-full font-semibold shadow hover:opacity-90 transition-all duration-300"}," Start Now ",8,xe)]))),128))]),_:1})]))])):(o(),s("div",he," ðŸš« You are not authorized to view quizzes. "))]),_:1})]))]))}},be=[{path:"/",name:"home",component:ye}],j=I({history:O(),routes:be});j.beforeEach(async(x,u,n)=>{const{token:d,user:l,init:a,hasAnyRole:r}=$();if(d.value&&!l.value&&await a(),x.meta.requiresAuth){if(!d.value)return n("/login");if(x.meta.roles&&!r(x.meta.roles))return n("/")}n()});D(re).use(j).mount("#app");
