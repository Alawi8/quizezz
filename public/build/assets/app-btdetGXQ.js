import{r as n,o as A,u as _,c as s,a as o,b as t,d as y,n as j,e as b,t as w,f as H,w as T,g as z,v as $,h as V,i as k,j as q,k as N,l as C,T as R,m as S,F as U,p as B,q as D,s as E}from"./userAuth-Yh9Tnyae.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as P,c as Q,a as F}from"./axios-CFKh4b2I.js";const I={class:"bg-green-700 text-white shadow-md sticky top-0 z-50 rounded-lg"},O={class:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between"},G={key:0,class:"relative ml-4"},W={key:0,class:"absolute right-0 mt-2 w-64 max-w-[90vw] bg-white z-10 text-green-700 rounded-xl shadow-xl py-3 px-2 animate-fade-in"},Y={key:1,class:"hidden md:flex items-center gap-3"},J={key:0,class:"md:hidden px-4 pb-4"},K={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},X={class:"bg-white p-6 rounded shadow-lg w-80"},Z={key:0,class:"text-red-500 text-sm mt-2"},ee={__name:"Header",setup(v){const{user:r,login:u,logout:i,init:f}=_(),l=n(!1),d=n(!1),c=n(!1),g=n(""),h=n(""),x=n(null);A(async()=>{await f()});async function m(){x.value=null,await u(g.value,h.value),r.value?l.value=!1:x.value="Login failed"}return(p,e)=>(o(),s("header",I,[t("div",O,[e[12]||(e[12]=t("div",{class:"text-2xl font-extrabold tracking-wide"},"QuizzApp",-1)),t("button",{onClick:e[0]||(e[0]=a=>c.value=!c.value),class:"md:hidden focus:outline-none"},e[8]||(e[8]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])),t("nav",{class:j(["md:flex gap-6 items-center",c.value?"flex flex-col absolute top-full rounded-lg mt-1 left-0 w-full bg-green-700 p-4":"hidden md:flex"])},e[9]||(e[9]=[t("a",{href:"/",class:"text-white hover:text-green-100 font-medium"},"Home",-1),t("a",{href:"/projects",class:"text-white hover:text-green-100 font-medium"},"My Projects",-1),t("a",{href:"/tests",class:"text-white hover:text-green-100 font-medium"},"Quizzes",-1)]),2),b(r)?(o(),s("div",G,[t("button",{onClick:e[1]||(e[1]=a=>d.value=!d.value),class:"flex items-center gap-2 bg-white text-green-700 font-semibold px-4 py-1 rounded-full shadow-sm hover:bg-gray-100"},[t("span",null,w(b(r).name),1)]),d.value?(o(),s("div",W,[e[10]||(e[10]=H('<a href="/profile" class="block px-4 py-2 rounded hover:bg-green-50" data-v-06a8670f>Profile</a><a href="/my-projects" class="block px-4 py-2 rounded hover:bg-green-50" data-v-06a8670f>My Projects</a><a href="/settings" class="block px-4 py-2 rounded hover:bg-green-50" data-v-06a8670f>Settings</a><a href="/admin/dashboard" class="block px-4 py-2 rounded hover:bg-green-50" data-v-06a8670f>Admin Dashboard</a><hr class="my-2" data-v-06a8670f>',5)),t("button",{onClick:e[2]||(e[2]=(...a)=>b(i)&&b(i)(...a)),class:"w-full text-left px-4 py-2 text-red-600 rounded hover:bg-red-50"},"Logout")])):y("",!0)])):(o(),s("div",Y,[t("button",{onClick:e[3]||(e[3]=a=>l.value=!0),class:"bg-white text-green-700 px-4 py-1 rounded-full font-medium hover:bg-gray-100"},"Login"),e[11]||(e[11]=t("a",{href:"/register",class:"text-white underline"},"Register",-1))]))]),!b(r)&&c.value?(o(),s("div",J,[t("button",{onClick:e[4]||(e[4]=a=>l.value=!0),class:"block w-full text-left text-white font-medium py-2"},"Login"),e[13]||(e[13]=t("a",{href:"/register",class:"block w-full text-left text-white font-medium py-2"},"Register",-1))])):y("",!0),l.value?(o(),s("div",K,[t("div",X,[e[15]||(e[15]=t("h2",{class:"text-lg font-bold mb-4 text-green-800"},"Login",-1)),t("form",{onSubmit:T(m,["prevent"])},[z(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>g.value=a),type:"email",placeholder:"Email",class:"border border-green-300 p-2 w-full mb-2 rounded"},null,512),[[$,g.value]]),z(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>h.value=a),type:"password",placeholder:"Password",class:"border border-green-300 p-2 w-full mb-4 rounded"},null,512),[[$,h.value]]),e[14]||(e[14]=t("button",{class:"bg-green-700 text-white px-4 py-2 rounded w-full"},"Login",-1)),t("button",{onClick:e[7]||(e[7]=a=>l.value=!1),type:"button",class:"text-gray-500 text-sm mt-2 w-full"},"Cancel")],32),x.value?(o(),s("p",Z,w(x.value),1)):y("",!0)])])):y("",!0)]))}},te=L(ee,[["__scopeId","data-v-06a8670f"]]),se={class:"p-6 text-center"},oe={__name:"App",setup(v){return n(0),(r,u)=>{const i=V("router-view");return o(),s("div",se,[k(te),k(i)])}}},ae={class:"container mx-auto px-4 py-8 animate-fade-in"},ne={key:0,class:"text-center text-gray-500 py-12 animate-pulse"},le={key:1},re={key:0},ie={key:0,class:"text-center text-gray-500 text-lg animate-pulse"},de={key:1,class:"text-center text-red-500 text-lg animate-shake"},ue={key:2,class:"grid sm:grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-6"},ce={class:"text-2xl font-bold text-green-700 mb-2"},fe={class:"text-green-600 mb-4"},me=["onClick"],pe={key:1,class:"text-center text-red-500 py-12 text-lg animate-bounce"},ve={__name:"Home",setup(v){P();const{token:r,fetchUser:u,hasAnyRole:i}=_(),f=n([]),l=n(!0),d=n(!1),c=n(null),g=q(()=>r.value&&i(["super-admin","student"]));async function h(){var m;d.value=!0;try{const p=await D.get("/api/student/display");f.value=((m=p.data)==null?void 0:m.data)??[]}catch{c.value="❌ Failed to load quizzes."}finally{d.value=!1}}function x(m){window.location.href=`/questions/${m}`}return A(async()=>{r.value&&await u(),l.value=!1}),N(()=>{g.value?h():f.value=[]}),(m,p)=>(o(),s("div",ae,[l.value?(o(),s("div",ne,p[0]||(p[0]=[t("p",{class:"text-xl font-medium"},"🔄 Checking user status...",-1)]))):(o(),s("div",le,[k(R,{name:"fade",mode:"out-in"},{default:C(()=>[g.value?(o(),s("div",re,[p[1]||(p[1]=t("h1",{class:"text-4xl font-extrabold text-center text-green-700 mb-10 animate-slide-down"}," Available Quizzes ",-1)),d.value?(o(),s("div",ie," 🔄 Loading quizzes... ")):c.value?(o(),s("div",de,w(c.value),1)):(o(),s("div",ue,[k(S,{name:"fade",tag:"div",class:"contents"},{default:C(()=>[(o(!0),s(U,null,B(f.value,e=>(o(),s("div",{key:e.id,class:"bg-white border border-green-200 rounded-2xl p-6 shadow-md hover:shadow-xl transition-all duration-300 animate-fade-in hover:-translate-y-1"},[t("h2",ce,w(e.title),1),t("p",fe," Duration: "+w(e.duration??"Not specified")+" mins ",1),t("button",{onClick:a=>x(e.id),class:"w-full bg-gradient-to-r from-green-500 to-green-700 text-white px-4 py-2 rounded-full font-semibold shadow hover:opacity-90 transition-all duration-300"}," Start Now ",8,me)]))),128))]),_:1})]))])):(o(),s("div",pe," 🚫 You are not authorized to view quizzes. "))]),_:1})]))]))}},ge=L(ve,[["__scopeId","data-v-85c7b8b8"]]),xe=[{path:"/",name:"home",component:ge}],M=Q({history:F(),routes:xe});M.beforeEach(async(v,r,u)=>{const{token:i,user:f,init:l,hasAnyRole:d}=_();if(i.value&&!f.value&&await l(),v.meta.requiresAuth){if(!i.value)return u("/login");if(v.meta.roles&&!d(v.meta.roles))return u("/")}u()});E(oe).use(M).mount("#app");
